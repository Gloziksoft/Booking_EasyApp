<!DOCTYPE html>
<html lang="sk" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments/layout.html :: head}"></head>

<body class="d-flex flex-column min-vh-100 bg-light">
<header th:replace="~{fragments/layout.html :: header}"></header>

<div class="container my-5">

    <!-- Flash notifikácia -->
    <div th:if="${message}" class="alert alert-success alert-dismissible fade show d-flex justify-content-between align-items-center" role="alert">
        <span th:text="${message}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    <div class="card shadow-sm border-0">
        <div class="card-header bg-primary text-white">
            <h3 class="mb-0" th:text="${reservation.offerName}">Názov ponuky</h3>
        </div>
        <div class="card-body">
            <h5 class="card-title">Popis ponuky</h5>
            <p class="card-text" th:text="${reservation.description}">Detailný popis ponuky...</p>

            <!-- Doplnkové tagy -->
            <div class="mb-2">
                <span th:each="tag : ${reservation.tags}" class="badge bg-info text-dark me-1"
                      th:text="${tag.displayName}"></span>
            </div>

            <h5 class="mt-4">Podrobnosti rezervácie</h5>
            <ul class="list-group list-group-flush">
                <li class="list-group-item"><strong>Cena:</strong> <span
                        th:text="${reservation.price} + ' €'">0 €</span></li>
                <li class="list-group-item"><strong>Typ služby:</strong> <span
                        th:text="${reservation.serviceType.displayName}">Typ služby</span></li>
                <li class="list-group-item"><strong>Začiatok rezervácie:</strong>
                    <span th:text="${#temporals.format(reservation.startDateTime, 'dd.MM.yyyy HH:mm')}">01.09.2025 10:00</span>
                </li>
                <li class="list-group-item"><strong>Koniec rezervácie:</strong>
                    <span th:text="${#temporals.format(reservation.endDateTime, 'dd.MM.yyyy HH:mm')}">08.09.2025 10:00</span>
                </li>
                <li class="list-group-item"><strong>Rezervoval:</strong>
                    <span th:text="${reservation.userFirstName} + ' ' + ${reservation.userLastName}">Meno Priezvisko</span>
                    (<span th:text="${reservation.userEmail}">email@example.com</span>)
                </li>
                <li class="list-group-item"><strong>Dospelí:</strong> <span th:text="${reservation.adults}">0</span>
                </li>
                <li class="list-group-item"><strong>Deti:</strong> <span th:text="${reservation.children}">0</span></li>

                <!-- Doplnkové služby -->
                <li class="list-group-item">
                    <strong>Doplnkové služby:</strong>
                    <span th:if="${#lists.isEmpty(reservation.additionalServices)}">Žiadne</span>
                    <span th:each="service : ${reservation.additionalServices}"
                          class="badge bg-secondary me-1"
                          th:text="${service.displayName}"></span>
                </li>
            </ul>

        </div>

        <div class="card-footer d-flex justify-content-between">
            <a th:href="@{/reservations}" class="btn btn-outline-secondary">Späť na rezervácie</a>
            <a th:href="@{/offers/{id}(id=${reservation.offerId})}" class="btn btn-primary">Zobraziť ponuku</a>
        </div>
    </div>

</div>

<footer th:replace="~{fragments/layout.html :: footer}"></footer>
</body>
</html>
